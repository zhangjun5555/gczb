(function(d){var e=document,l=d.location;if(!d.TJ58){d.TJ58=!0;null==d.String.prototype.trim&&(d.String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var c={curURL:l.href,referrer:e.referrer,protocol:l.protocol,window_size:e.documentElement.clientWidth+"x"+e.documentElement.clientHeight,domain:function(){var a=l.host.toLowerCase(),b=/.*?([^\.]+\.(com|org|net|biz|edu|cc)(\.[^\.]+)?)/;return b.test(a)?"."+a.replace(b,"$1"):""}(),navigation_type:function(){var a="-1";
try{a=d.performance.navigation.type}catch(b){return"-1"}return a}(),setCookie:function(){if(!e.cookie)return!1;var a=new Date;2<arguments.length?a.setTime(a.getTime()+864E5*arguments[2]):a.setTime(a.getTime()+18E5);2<=arguments.length&&(e.cookie=arguments[0]+"="+escape(arguments[1])+"; expires="+a.toGMTString()+"; domain="+c.domain+"; path=/")},getCookie:function(a){if(!e.cookie)return"";var b;return(b=e.cookie.match(RegExp("(^| )"+a+"=([^;]*)(;|$)")))?unescape(b[2]):""},ajaxsend:function(a){(new Image).src=
a},setLocalStorage:function(a,b){try{d.localStorage&&d.localStorage.setItem(a,b)}catch(c){}},getLocalStorage:function(a){try{return d.localStorage?d.localStorage.getItem(a):""}catch(b){return""}},getUUID:function(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*d.Math.random()|0;return("x"==a?b:b&3|8).toString(16)}),b=this.getCookie(a)||this.getLocalStorage(a)||b;this.setCookie(a,b,365);this.setLocalStorage(a,b);return b},getRandom:function(){return d.Math.random()}},
g={config:{trackLog:{server:"tracklog.58.com/58che_pc/empty.js.gif",allParams:"site_name tag referrer _ga_utma window_size trackURL rand_id".split(" "),uniqParams:["tag","rand_id"]},clickLog:{server:"tracklog.58.com/58che_pc/click/empty.js.gif",allParams:"site_name tag from trackURL referrer rand".split(" "),uniqParams:["tag","from","rand"]}},getBaseInfo:function(){var a=d.site_name||"58che",b=d.encodeURIComponent(c.referrer),e=c.getUUID("58tj_uuid"),g=c.window_size,h=c.navigation_type,s=c.getCookie("als"),
f=d._trackURL||"NA",k,m,n;""!=c.getCookie("new_session")?(k=c.getCookie("init_refer"),m="0"):(k=d.encodeURIComponent(c.referrer),m="1");n=""!=c.getCookie("new_uv")?parseInt(c.getCookie("new_uv"))+("0"==m?0:1):1;c.setCookie("new_session",m);c.setCookie("init_refer",k);c.setCookie("new_uv",n,365);var l="1.1.1.1.1."+n,p=[],r=f.indexOf("{"),h={als:s,new_session:m,init_refer:k,new_uv:n,UUID:e,navtype:h},q;for(q in h)h.hasOwnProperty(q)&&p.push("'"+q+"':'"+h[q]+"'");p.join(",");f="NA"!==f&&-1!==r?f.substring(0,
r+1)+p+","+f.substring(r+1):"{"+p+"}";return{site_name:a,referrer:b,UUID:e,window_size:g,_ga_utma:l,trackURL:f}},sendLog:function(a,b){var d=this.baseInfo,e=this.config[a];if(a&&e&&b&&"object"===typeof b){for(var h=[],g=e.allParams,f=0,k=g.length;f<k;f++)h.push(g[f]+"="+(b[g[f]]||d[g[f]]||""));c.ajaxsend(c.protocol+"//"+e.server+"?"+h.join("&"))}},trackLog:function(){this.sendLog("trackLog",{tag:"pvstatall",rand_id:c.getRandom()})},clickLog:function(a){var b="",b=null!=a&&"from="===a.substring(0,
5)?a.replace("from=",""):"default&"+a;this.sendLog("clickLog",{tag:"pvsiters",from:b,rand:c.getRandom()})},bindAlsTag:function(){if(!c.getCookie("als")&&d.$&&"function"===typeof $("body").one)$("body").one("mouseover",function(){c.setCookie("als","0",365)});c.getCookie("isSpider")&&c.setCookie("isSpider","",0)}};g.baseInfo=g.getBaseInfo();g.trackLog();g.bindAlsTag();d.clickLog=function(a){g.clickLog(a)}}})(window);
