window.GANJI_LOG_OTHER=window.GANJI_LOG_OTHER||function(){var e=function(e,n,t,i){var r=["uuid="+(j("gj_other_uuid")||I("gj_other_uuid")||R("gj_other_uuid")||"-"),"gjuser="+(j("gj_other_gjuser")||I("gj_other_gjuser")||R("gj_other_gjuser")||"-"),"sid="+(j("gj_other_sid")||I("gj_other_sid")||R("gj_other_sid")||"-"),"ca_n="+(j("gj_other_ca_n")||I("gj_other_ca_n")||R("gj_other_ca_n")||"-"),"ca_s="+(j("gj_other_ca_s")||I("gj_other_ca_s")||R("gj_other_ca_s")||"-"),"ca_i="+(j("gj_other_ca_i")||I("gj_other_ca_i")||R("gj_other_ca_i")||"-"),"ca_kw="+(j("gj_other_ca_kw")||I("gj_other_ca_kw")||R("gj_other_ca_kw")||"-"),"unique_id="+(j("gj_other_unique_id")||I("gj_other_unique_id")||R("gj_other_unique_id")||"-"),"client_id="+(j("gj_other_client_id")||I("gj_other_client_id")||R("gj_other_client_id")||"-"),"version="+(j("gj_other_version")||I("gj_other_version")||R("gj_other_version")||"-"),"agency="+(j("gj_other_agency")||I("gj_other_agency")||R("gj_other_agency")||"-"),"ifid="+(j("gj_other_ifid")||I("gj_other_ifid")||R("gj_other_ifid")||"-"),"city_id="+(j("gj_other_city_id")||I("gj_other_city_id")||R("gj_other_city_id")||"-"),"platform="+p(),"ua="+v(),"refer="+(document.referrer?encodeURIComponent(document.referrer):"-"),"gc="+b(n||document.getElementsByTagName("head")[0].getAttribute("data-gc")||"/-/-/-/-/-"),"gjchver="+(document.getElementsByTagName("head")[0].getAttribute("data-gjchver")||"A"),"landing="+(x()||0),"rnd="+Math.random()];var o=true;var a=window.document.referrer.split("/")[2]||"-";var c=y();var _=a.indexOf("ganji.com")===-1;var s=p().indexOf("app")===-1;var d=window.navigator.platform.toLowerCase();if(y()&&a.indexOf("ganji.com")===-1&&p().indexOf("app")===-1){var g=["uuid","gjuser","sid","ca_n","ca_s","ca_i","ca_kw","unique_id","client_id","version","agency","ifid","city_id","gc_1"];g.map(function(e){C("gj_other_"+e,null,{expires:-1})});window.console.log("没有发起数据上报：!"+c+"_"+_+"_"+s+"_"+d);return}var u=new Image;var f=false;var l="//analytics.ganji.com/"+t+"?";if(!e){e=""}else{if(e&&/^\d*$/.test(e.split("@")[0])){e="ge="+e}else{e="gjalog="+e}}if(e!==""){r.push(e);r.push("access_type="+"ev")}else{r.push("access_type="+"pv")}l+=r.join("&");u.onload=function(){h()};u.onerror=function(){h(new Error("network error"))};setTimeout(function(){h(new Error("timeout"))},1e4);u.src=l;function h(e){if(f){return}f=true;if(i){i(e||null)}}function v(){var e=window.navigator.userAgent.toLowerCase()||"",n;var t={os:"-",ov:"-",bn:"-",bv:"-"};if(/windows|win32/i.test(e)){t.os="windows"}else if(/macintosh/i.test(e)){t.os="macintosh"}else if(/os/.test(e)){t.os="ios"}else if(/android/.test(e)){t.os="android"}t.ov=(/windows nt ([\d\.]*)/i.exec(e)||/mac os x ([\d\.]*)/i.exec(e)||/os ([\d_]*)/i.exec(e)||/android ([\d_]*)/i.exec(e))[1]||"-";n=e.match(/applewebkit\/([^\s]*)/);if(n&&n[1]){t.bn="webkit";t.bv=m(n[1])}else{if(/khtml/.test(e)){t.bn="webkit";t.bv=1}}if(t.bn!=="webkit"){n=e.match(/gecko\/([^\s]*)/);if(n){t.bn="gecko";t.bv=1;n=e.match(/rv:([^\s\)]*)/);if(n&&n[1]){t.bv=m(n[1])}}}if(t.bn!=="-"){if(/trident\/([0-9]{1,}[\.0-9]{0,})/.exec(e)!=null){t.bn="ie";t.bv=parseFloat(RegExp.$1)}}e=["os:"+t.os,"ov:"+t.ov,"bn:"+t.bn,"bv:"+t.bv,"dv:"+window.navigator.platform||"-","rl:"+window.screen.width+","+window.screen.height].join("|");return e}function m(e){var n=0;return parseFloat(e.replace(/\./g,function(){return n++===1?"":"."}))}function w(e){return e.replace(/^\?/,"").split("&").map(function(e){return e.split("=")}).reduce(function(e,n){if(n[0].trim()){e[n[0]]=n[1]}return e},{})}function j(e){var n=w(window.location.search);if(n[e]){var t=n[e];var i=k();C(e,t,{domain:i,path:"/"});localStorage.setItem(e,t);return t}else{return false}}function p(){var e=window.navigator.platform.toLowerCase();var n=window.navigator.userAgent.toLowerCase();if(e.indexOf("win")!==-1||e.indexOf("mac")!==-1||e.indexOf("x11")!==-1){return"pc"}else if(n.indexOf("ganji_")!==-1){return"app"}else{return"m"}}function b(e){var n=j("gj_other_gc_1")||I("gj_other_gc_1")||R("gj_other_gc_1")||"-";e=e.slice(3);if(e.length==0){return"/-/-/-/-/-"}e="/"+n+"/"+e;return e}function x(){if(document.referrer){var e=encodeURIComponent(document.referrer).match("(http://|https://)?([^/]*)")[2];if(/(ganji).(com|cn)/i.test(e)){return 1}}}function y(){var e=window.document.referrer.split("/")[2]||"-";var n=document.domain.split(".").slice(-2).join(".");if(n==="com.cn"||n==="net.cn"||n==="org.cn"||n==="gov.cn"){n=document.domain.split(".").slice(-3).join(".")}return!!(e.indexOf(n)===-1)}function k(){var e=document.domain.split(".").slice(-2).join(".");if(e==="com.cn"||e==="net.cn"||e==="org.cn"||e==="gov.cn"){e=document.domain.split(".").slice(-3).join(".")}return e}function O(e){var n={};if(e.length>0){var t=e.split(/;\s/g);var i;var r;var o;for(var a=0,c=t.length;a<c;a++){o=t[a].match(/([^=]+)=/i);if(o instanceof Array){try{i=decodeURIComponent(o[1]);r=decodeURIComponent(t[a].substring(o[1].length+1))}catch(e){}}else{i=decodeURIComponent(t[a]);r=""}if(i){n[i]=r}}}return n}function I(e){var n=O(document.cookie);return n[e]}function C(e,n,t){t=t||{};var i=t.expires;var r=t.domain;var o=t.path;if(!t.raw){n=encodeURIComponent(String(n))}var a=e+"="+n;var c=i;if(typeof c==="number"){c=new Date(Date.now()+i*1e3)}if(c instanceof Date){a+="; expires="+c.toUTCString()}if(typeof r==="string"&&r!==""){a+="; domain="+r}if(typeof o==="string"&&o!==""){a+="; path="+o}if(t.secure){a+="; secure"}document.cookie=a;return a}function R(e){if(window.localStorage){return window.localStorage.getItem(e)}return null}function A(e,n){if(window.localStorage){window.localStorage.setItem(e,n)}}};this.sendEv=function(n,t){e(n,t,"gp.gif")};this.sendPv=function(n){e(null,n,"gp.gif")};sendPv();return this}();